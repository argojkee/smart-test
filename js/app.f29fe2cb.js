(function(){"use strict";var e={6316:function(e,t,n){var s=n(9242),i=n(3396);const a={class:"container"};function l(e,t,n,s,l,r){const o=(0,i.up)("v-icon"),u=(0,i.up)("UsersFilter"),d=(0,i.up)("UsersList"),c=(0,i.up)("Modal");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",a,[(0,i._)("button",{class:"add-btn",onClick:t[0]||(t[0]=e=>r.openModal("form"))},[(0,i.Wm)(o,{name:"io-person-add-sharp",fill:"white",scale:"1.5",animation:"flash",speed:"slow"})]),(0,i.Wm)(u),(0,i.Wm)(d)]),l.isShowModal?((0,i.wg)(),(0,i.j4)(c,{key:0,userId:this.userIdDetails,componentType:l.componentType,onClose:r.closeModal},null,8,["userId","componentType","onClose"])):(0,i.kq)("",!0)],64)}const r={class:"users-list"};function o(e,t,n,s,a,l){const o=(0,i.up)("UserItem");return(0,i.wg)(),(0,i.iD)("ul",r,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.filterUsers(),(e=>((0,i.wg)(),(0,i.j4)(o,{key:e.id,user:e},null,8,["user"])))),128))])}var u=n(1076);const d="https://reqres.in/api/users",c=async()=>u.Z.get(`${d}`).then((e=>e.data.data)),m=async e=>await u.Z.post(`${d}`,e).then((e=>e.data)),h=async e=>await u.Z.delete(`${d}/${e}`),p=async e=>u.Z.get(`${d}/${e}`).then((e=>e.data)),f=async(e,t)=>{const n=Object.fromEntries(Object.entries(t).filter((([,e])=>!!e)));return u.Z.get(`${d}/${e}`,n).then((e=>e.data))};var g=n(3836);const y={position:"top-center",autoClose:3e3},b=e=>g.Am.success(e,y),w=e=>g.Am.error(e,y);var v=n(1373),_=(0,v.Z)(),C=n(7139);const F=["src"],U={class:"userInfo"},k=["disabled"];function V(e,t,n,a,l,r){const o=(0,i.up)("v-icon");return(0,i.wg)(),(0,i.iD)("li",{onClick:t[1]||(t[1]=e=>r.onUserDetails(e,n.user.id)),class:"user-item"},[(0,i._)("img",{src:n.user.avatar,alt:"{{user.first_name}}"},null,8,F),(0,i._)("div",U,[(0,i._)("h2",null,(0,C.zw)(n.user.last_name)+" "+(0,C.zw)(n.user.first_name),1),(0,i._)("p",null,(0,C.zw)(n.user.email),1)]),(0,i._)("button",{class:"delete-btn",disabled:l.isLoading,onClick:t[0]||(t[0]=()=>r.deleteUser(n.user.id))},[(0,i.wy)((0,i.Wm)(o,{name:"ri-delete-bin-6-line",fill:"white",scale:"1.5"},null,512),[[s.F8,!l.isLoading]]),(0,i.wy)((0,i.Wm)(o,{name:"fa-spinner",animation:"spin-pulse",fill:"white",scale:"1.5"},null,512),[[s.F8,l.isLoading]])],8,k)])}var S={data(){return{isLoading:!1}},props:{user:{type:Object,required:!0}},emits:["OpenModalBus"],methods:{onUserDetails(e,t){const{tagName:n}=e.target;"BUTTON"!==n&&"svg"!==n&&"path"!==n&&_.emit("OpenModalBus",{type:"details",userId:t})},async deleteUser(e){try{this.isLoading=!0,await h(e),b(`${this.user.first_name} has been successfully deleted`)}catch(t){w("Sorry, something went wrong. Please, try again")}finally{this.isLoading=!1}}}},M=n(89);const E=(0,M.Z)(S,[["render",V]]);var I=E,P={name:"UsersList",data(){return{users:[],filter:{text:"",emailFilter:!1,nameFilter:!1}}},created(){_.on("onChangeFilter",(e=>{this.filter={...e}}))},components:{UserItem:I},emits:["OpenModalBus"],methods:{filterUsers(){const{text:e,nameFilter:t,emailFilter:n}=this.filter,{users:s}=this;return e&&(t||n)?e&&t&&n?s.filter((t=>t.first_name.includes(e)||t.email.includes(e))):e&&t&&!n?s.filter((t=>t.first_name.includes(e))):e&&n&&!t?s.filter((t=>t.email.includes(e))):void 0:s},async fetchUsers(){const e=await c();this.users=e},async deleteUser(e){try{const t=this.users.find((t=>t.id===e));await h(e),b(`${t.first_name} has been successfully deleted`)}catch(t){w("Sorry, something went wrong. Please, try again")}}},mounted(){this.fetchUsers()}};const D=(0,M.Z)(P,[["render",o]]);var N=D;const L={class:"modal"};function $(e,t,n,s,a,l){const r=(0,i.up)("v-icon"),o=(0,i.up)("AddForm"),u=(0,i.up)("UserDetails");return(0,i.wg)(),(0,i.iD)("div",{class:"backdrop",onClick:t[1]||(t[1]=(...e)=>l.onBackdropClick&&l.onBackdropClick(...e))},[(0,i._)("div",L,[(0,i._)("button",{class:"close-btn",onClick:t[0]||(t[0]=(...e)=>l.closeModal&&l.closeModal(...e))},[(0,i.Wm)(r,{name:"io-close",fill:"black",scale:"1"})]),"form"===n.componentType?((0,i.wg)(),(0,i.j4)(o,{key:0,onUserAdded:l.closeModal,title:"Add form"},null,8,["onUserAdded"])):(0,i.kq)("",!0),"details"===n.componentType?((0,i.wg)(),(0,i.j4)(u,{key:1,userId:n.userId,title:"User details"},null,8,["userId"])):(0,i.kq)("",!0)])])}const j={class:"modal-title"},O={class:"add-label-container"},x=(0,i._)("label",{class:"add-label",for:"name"},"Name",-1),T={class:"add-label-container"},Z=(0,i._)("label",{class:"add-label",for:"email"},"Email",-1),H={class:"submit-btn",type:"submit"};function A(e,t,n,a,l,r){const o=(0,i.up)("v-icon");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("h2",j,(0,C.zw)(n.title),1),(0,i._)("form",{onSubmit:[t[5]||(t[5]=(0,s.iM)((()=>{}),["prevent"])),t[6]||(t[6]=(...e)=>r.onSubmitPress&&r.onSubmitPress(...e))],class:"add-form",autocomplete:"off"},[(0,i._)("div",O,[(0,i.wy)((0,i._)("input",{class:(0,C.C_)([{valid:l.user.userName&&l.isValidName,invalid:l.user.userName&&!l.isValidName},"add-input"]),onInput:t[0]||(t[0]=(...e)=>r.onChangeName&&r.onChangeName(...e)),placeholder:"Name",type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>l.user.userName=e),id:"name"},null,34),[[s.nr,l.user.userName]]),x]),(0,i._)("div",T,[(0,i.wy)((0,i._)("input",{class:(0,C.C_)([{valid:l.user.userEmail&&l.isValidEmail,invalid:l.user.userEmail&&!l.isValidEmail},"add-input"]),onInput:t[2]||(t[2]=(...e)=>r.onChangeEmail&&r.onChangeEmail(...e)),placeholder:"Email",type:"mail","onUpdate:modelValue":t[3]||(t[3]=e=>l.user.userEmail=e),id:"email"},null,34),[[s.nr,l.user.userEmail]]),Z]),(0,i.wy)((0,i._)("select",{class:(0,C.C_)(["add-job-select",{valid:!!l.user.userJob}]),"onUpdate:modelValue":t[4]||(t[4]=e=>l.user.userJob=e)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.jobsList,((e,t)=>((0,i.wg)(),(0,i.iD)("option",{key:t},(0,C.zw)(e),1)))),128))],2),[[s.bM,l.user.userJob]]),(0,i._)("button",H,[(0,i.wy)((0,i.Wm)(o,{name:"io-person-add-sharp",fill:"white",scale:"1.5",animation:l.isValidEmail&&l.isValidName&&l.user.userJob?"flash":"float"},null,8,["animation"]),[[s.F8,!l.isLoading]]),(0,i.wy)((0,i.Wm)(o,{name:"fa-spinner",animation:"spin-pulse",fill:"white",scale:"1.5"},null,512),[[s.F8,l.isLoading]])])],32)],64)}var W=n(3738),z=n.n(W),q={name:"AddForm",data(){return{isLoading:!1,user:{userName:"",userEmail:"",userJob:""},isValidEmail:!1,isValidName:!1,jobsList:["Frontend developer","Backend developer","UI designer","Team leader","Project manager"]}},props:{title:{type:String,required:!0}},emits:["user-added"],methods:{async onSubmitPress(){const{userName:e,userEmail:t,userJob:n}=this.user,{isValidEmail:s,isValidName:i}=this;if(!e||!t||!n)return w("All fields must be filled in");if(e&&!i)return w("Name must be 6 symbols minimum and can't be a number");if(t&&!s)return w("Please, enter valid email");if(e&&t&&n){this.isLoading=!0;try{const e=await m(this.user);b(`Yeah, ${e.userName} has been successfully added`),this.$emit("user-added")}catch(a){w("Sorry, something went wrong. Please, try again")}finally{this.isLoading=!1}}},onChangeName:z()((function(){const e=/^[a-zA-Z]{6,}$/;this.isValidName=e.test(this.user.userName)}),300),onChangeEmail:z()((function(){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;this.isValidEmail=e.test(this.user.userEmail)}),300)}};const B=(0,M.Z)(q,[["render",A]]);var Y=B;const K={class:"modal-title"},J={key:0},R={class:"user-name-details"},G=(0,i._)("p",null,null,-1),Q=["src"],X={class:"user-details-email"};function ee(e,t,n,s,a,l){const r=(0,i.up)("EditUserForm");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("h2",K,(0,C.zw)(n.title),1),a.user?((0,i.wg)(),(0,i.iD)("div",J,[(0,i._)("h3",R,(0,C.zw)(a.user.first_name)+" "+(0,C.zw)(a.user.last_name),1),G,(0,i._)("img",{class:"details-user-img",src:a.user.avatar},null,8,Q),(0,i._)("p",X,(0,C.zw)(a.user.email),1),(0,i.Wm)(r,{userId:n.userId},null,8,["userId"])])):(0,i.kq)("",!0)],64)}const te={class:"edit-label-container"},ne=(0,i._)("label",{class:"edit-label",for:"phone"}," Phone number ",-1),se=(0,i._)("label",{for:"region"},"Address",-1),ie=["value"],ae=["value"],le={class:"edit-label-container"},re=(0,i._)("label",{class:"edit-label",for:"street"},"Street",-1),oe={class:"edit-label-container"},ue=(0,i._)("label",{class:"edit-label",for:"house"}," House",-1),de={class:"submit-btn",type:"submit"};function ce(e,t,n,a,l,r){const o=(0,i.up)("v-icon");return(0,i.wg)(),(0,i.iD)("form",{autocomplete:"off",class:"edit-user-form",onSubmit:[t[9]||(t[9]=(...e)=>r.onSubmit&&r.onSubmit(...e)),t[10]||(t[10]=(0,s.iM)((()=>{}),["prevent"]))]},[(0,i._)("div",te,[(0,i.wy)((0,i._)("input",{class:(0,C.C_)(["edit-input",{valid:l.phone&&l.isValidPhone,invalid:l.phone&&!l.isValidPhone}]),onInput:t[0]||(t[0]=(...e)=>r.onChangePhone&&r.onChangePhone(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>l.phone=e),id:"phone",placeholder:"Phone number"},null,34),[[s.nr,l.phone]]),ne]),se,(0,i.wy)((0,i._)("select",{class:(0,C.C_)(["edit-select",{valid:!!l.region}]),id:"region","onUpdate:modelValue":t[2]||(t[2]=e=>l.region=e),onChange:t[3]||(t[3]=e=>r.getRegionsInCountry(l.region.id))},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.regions,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:{region:e.name,id:e.id}},(0,C.zw)(e.name),9,ie)))),128))],34),[[s.bM,l.region]]),(0,i.wy)((0,i._)("select",{class:(0,C.C_)(["edit-select",{valid:!!l.country}]),"onUpdate:modelValue":t[4]||(t[4]=e=>l.country=e)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.countries,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.name},(0,C.zw)(e.name),9,ae)))),128))],2),[[s.F8,l.region],[s.bM,l.country]]),(0,i.wy)((0,i._)("div",le,[(0,i.wy)((0,i._)("input",{class:(0,C.C_)([{valid:l.street&&l.isValidStreet,invalid:l.street&&!l.isValidStreet},"edit-input"]),onInput:t[5]||(t[5]=(...e)=>r.onChangeStreet&&r.onChangeStreet(...e)),id:"street",type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>l.street=e),placeholder:"Street"},null,34),[[s.nr,l.street]]),re],512),[[s.F8,l.country]]),(0,i.wy)((0,i._)("div",oe,[(0,i.wy)((0,i._)("input",{class:(0,C.C_)([{valid:l.house&&l.isValidHouse,invalid:l.house&&!l.isValidHouse},"edit-input"]),onInput:t[7]||(t[7]=(...e)=>r.onChangeHouse&&r.onChangeHouse(...e)),id:"house",type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>l.house=e),placeholder:"House"},null,34),[[s.nr,l.house]]),ue],512),[[s.F8,l.street&&l.isValidStreet]]),(0,i._)("button",de,[(0,i.wy)((0,i.Wm)(o,{name:"md-modeedit-round",fill:"white",scale:"1"},null,512),[[s.F8,!l.isLoading]]),(0,i.wy)((0,i.Wm)(o,{name:"fa-spinner",animation:"spin-pulse",fill:"white",scale:"1"},null,512),[[s.F8,l.isLoading]])])],32)}const me="WeMm-Y4ogjVEo0-5v5F-iiD0_kA0h9",he="https://data-api.oxilor.com/rest",pe=async()=>await u.Z.get(`${he}/regions/?key=${me}&lng=ru`).then((e=>e.data.edges.map((e=>e.node)))),fe=async e=>await u.Z.get(`${he}/child-regions?parentId=${e}&key=${me}&lng=ru`).then((e=>e.data.edges.map((e=>e.node))));var ge={name:"EditUserForm",data(){return{phone:"",regions:null,country:"",region:"",countries:null,street:"",house:"",isValidPhone:!1,isValidStreet:!1,isValidHouse:!1,isLoading:!1}},props:{userId:{type:Number,required:!0}},async beforeMount(){const e=await pe();this.regions=e},methods:{async getRegionsInCountry(e){const t=await fe(e);this.countries=t},async onSubmit(){const{userId:e,phone:t,region:n,country:s,street:i,house:a}=this;if(t||n){this.isLoading=!0;try{if(t&&!this.isValidPhone)return w("Please, enter valid phone number");if(i&&!this.isValidStreet)return w("Please, enter valid street");if(a&&!this.isValidHouse)return w("Please, enter valid house number");await f(e,{phone:t,region:n.region,country:s,street:i,house:a}),b("User has been successfully updated"),_.emit("closeModalBus")}catch(l){b("Sorry, something went wrong. Please, try again")}finally{this.isLoading=!1}}else w("Please, enter user phone or address")},onChangePhone:z()((function(){const e=/^[0-9]{8,}$/;this.isValidPhone=e.test(this.phone)}),300),onChangeStreet:z()((function(){const e=/^[a-zA-Z]{4,}$/;this.isValidStreet=e.test(this.street),console.log("hello")}),300),onChangeHouse:z()((function(){const e=/^[1-9]\d{0,3}$/;this.isValidHouse=e.test(this.house)}),300)}};const ye=(0,M.Z)(ge,[["render",ce]]);var be=ye,we={name:"UserDetails",data(){return{user:null}},props:{userId:{type:Number,required:!0},title:{type:String,required:!0}},async beforeMount(){const{data:e}=await p(this.userId);this.user={...e}},components:{EditUserForm:be}};const ve=(0,M.Z)(we,[["render",ee]]);var _e=ve,Ce={name:"AddModal",data(){return{}},props:{componentType:{type:String,required:!0},userId:{type:Number,required:!1}},mounted(){window.addEventListener("keydown",this.onEscapeKey)},beforeUnmount(){window.removeEventListener("keydown",this.onEscapeKey)},methods:{closeModal(){this.$emit("close")},onBackdropClick(e){e.target===e.currentTarget&&this.closeModal()},onEscapeKey(e){"Escape"===e.key&&this.closeModal()}},components:{AddForm:Y,UserDetails:_e}};const Fe=(0,M.Z)(Ce,[["render",$]]);var Ue=Fe;const ke={class:"filter-container"},Ve=["disabled","placeholder"],Se={class:"label-container"},Me={class:"filter-label"},Ee={class:"filter-label"};function Ie(e,t,n,a,l,r){return(0,i.wg)(),(0,i.iD)("div",ke,[(0,i.wy)((0,i._)("input",{class:"filter-input",disabled:!l.filter.nameFilter&&!l.filter.emailFilter,placeholder:l.currentPlaceholder,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filter.text=e),name:"text",onInput:t[1]||(t[1]=(...e)=>r.changeFilter&&r.changeFilter(...e))},null,40,Ve),[[s.nr,l.filter.text]]),(0,i._)("div",Se,[(0,i._)("label",Me,[(0,i.Uk)(" Email "),(0,i.wy)((0,i._)("input",{type:"checkbox",name:"email",onChange:t[2]||(t[2]=(...e)=>r.changeFilter&&r.changeFilter(...e)),"onUpdate:modelValue":t[3]||(t[3]=e=>l.filter.emailFilter=e)},null,544),[[s.e8,l.filter.emailFilter]])]),(0,i._)("label",Ee,[(0,i.Uk)(" Name "),(0,i.wy)((0,i._)("input",{type:"checkbox",name:"name",onChange:t[4]||(t[4]=(...e)=>r.changeFilter&&r.changeFilter(...e)),"onUpdate:modelValue":t[5]||(t[5]=e=>l.filter.nameFilter=e)},null,544),[[s.e8,l.filter.nameFilter]])])])])}var Pe={name:"UsersFilter",data(){return{filter:{text:"",emailFilter:!1,nameFilter:!1},currentPlaceholder:"Select filter and enter filter value"}},emits:["onChangeFilter"],methods:{changeFilter({target:e}){this.filter.emailFilter||this.filter.nameFilter?this.currentPlaceholder="Enter filter value":this.currentPlaceholder="Select filter and enter filter value",_.emit("onChangeFilter",{...this.filter,[e.name]:e.value})}}};const De=(0,M.Z)(Pe,[["render",Ie]]);var Ne=De,Le={name:"App",data(){return{isShowModal:!1,componentType:null,userIdDetails:null}},emits:["close"],created(){_.on("OpenModalBus",(e=>{this.userIdDetails=e.userId,this.openModal(e.type)})),_.on("closeModalBus",(()=>{this.closeModal()}))},methods:{openModal(e){this.componentType=e,this.isShowModal=!0;let t=window.innerWidth-document.body.offsetWidth+"px";document.body.style.paddingRight=t,document.body.classList.add("modal-open")},closeModal(){this.isShowModal=!1,this.componentType=null,this.userIdDetails=null,document.body.style.paddingRight=0,document.body.classList.remove("modal-open")}},components:{UsersList:N,Modal:Ue,UsersFilter:Ne}};const $e=(0,M.Z)(Le,[["render",l]]);var je=$e,Oe=n(4463),xe=n(7053),Te=n(8422),Ze=n(9235),He=n(1799);(0,Oe.Go)(xe.GnT,Te.fCD,Ze.vDB,Ze.bjh,He.$NS);const Ae=(0,s.ri)(je);Ae.component("v-icon",Oe.xt),Ae.mount("#app")}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,s,i,a){if(!s){var l=1/0;for(d=0;d<e.length;d++){s=e[d][0],i=e[d][1],a=e[d][2];for(var r=!0,o=0;o<s.length;o++)(!1&a||l>=a)&&Object.keys(n.O).every((function(e){return n.O[e](s[o])}))?s.splice(o--,1):(r=!1,a<l&&(l=a));if(r){e.splice(d--,1);var u=i();void 0!==u&&(t=u)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[s,i,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var i,a,l=s[0],r=s[1],o=s[2],u=0;if(l.some((function(t){return 0!==e[t]}))){for(i in r)n.o(r,i)&&(n.m[i]=r[i]);if(o)var d=o(n)}for(t&&t(s);u<l.length;u++)a=l[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},s=self["webpackChunkvue_test_smart"]=self["webpackChunkvue_test_smart"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(6316)}));s=n.O(s)})();
//# sourceMappingURL=app.f29fe2cb.js.map